<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Battle à la carte — デモ</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0f19; --card:#11162a; --mut:#a1a8b5; --ink:#eef2ff; --pri:#f59e0b; --good:#10b981; --bad:#ef4444;
      --b:#1f2a44; --r:20px;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:"Noto Sans JP",system-ui; background:radial-gradient(900px 400px at 90% -10%, #1e293b 0%, transparent 60%), var(--bg); color:var(--ink)}
    a{color:inherit; text-decoration:none}
    .wrap{max-width:960px; margin:0 auto; padding:22px}
    .top{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:16px}
    .title{font-weight:800; letter-spacing:.02em}
    .btn{padding:10px 16px; border-radius:12px; border:1px solid #ffffff24; background:#ffffff0f; color:var(--ink); font-weight:700; cursor:pointer}
    .btn:hover{border-color:#ffffff55}
    .btn.primary{background:linear-gradient(135deg, var(--pri), #ef4444); border:none; color:white; box-shadow:0 8px 24px #00000040}
    .grid{display:grid; grid-template-columns:1fr 1fr; gap:16px}
    @media (max-width:860px){ .grid{grid-template-columns:1fr} }
    .card{background:#ffffff0a; border:1px solid #ffffff14; border-radius:var(--r); padding:16px}
    .pill{display:inline-block; padding:6px 10px; background:#ffffff12; border:1px solid #ffffff22; border-radius:999px; margin:0 6px 6px 0}
    .log{height:240px; overflow:auto; background:#0c1224; border:1px dashed #ffffff22; border-radius:12px; padding:12px; font-size:14px}
    .log b{color:#fff}
    .stack{display:flex; gap:10px; flex-wrap:wrap}
    .counter{font-weight:800; font-size:28px}
    footer{color:var(--mut); text-align:center; margin-top:16px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <h1 class="title">🎲 Battle à la carte — デモ</h1>
      <div class="stack">
        <button class="btn" onclick="resetGame()">リセット</button>
        <a class="btn" href="index.html">← ホーム</a>
        <button class="btn primary" onclick="drawCard()">カードを引く</button>
      </div>
    </div>

    <div class="grid">
      <section class="card">
        <h3 style="margin:0 0 8px 0;">山札</h3>
        <div class="stack" id="deck"></div>
        <div style="display:flex; align-items:center; gap:12px; margin-top:8px">
          <div style="color:var(--mut)">残り</div>
          <div class="counter" id="remain">0</div>
        </div>
      </section>

      <section class="card">
        <h3 style="margin:0 0 8px 0;">ログ</h3>
        <div class="log" id="log"></div>
      </section>
    </div>

    <section class="card" style="margin-top:16px">
      <h3 style="margin:0 0 8px 0;">ヒント</h3>
      <p style="color:var(--mut); margin:0">このデモはシンプル版です。演出やレシピ判定などは、今後アップデートで拡張していきます。</p>
    </section>

    <footer>© あにあに遊び場</footer>
  </div>

  <script>
    const deckEl = document.getElementById('deck');
    const logEl = document.getElementById('log');
    const remainEl = document.getElementById('remain');

    // ちょっと豪華なサンプルカード
    const cards = [
      { id:1, name:"🍙 おにぎり", kind:"攻撃+2" },
      { id:2, name:"🍵 お茶", kind:"回復+2" },
      { id:3, name:"🍫 チョコ", kind:"攻撃+5" },
      { id:4, name:"🥕 にんじん", kind:"防御+2" },
      { id:5, name:"🍞 パン", kind:"回復+3" },
      { id:6, name:"🍛 カレー", kind:"攻撃+7" },
      { id:7, name:"🍖 ステーキ", kind:"攻撃+6" },
      { id:8, name:"🍎 りんご", kind:"回復+1" },
    ];

    let deck = [];

    function shuffle(array){
      const a = array.slice();
      for(let i=a.length-1;i>0;i--){
        const j = Math.floor(Math.random()*(i+1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function renderDeck(){
      deckEl.innerHTML = '';
      deck.forEach(c => {
        const el = document.createElement('span');
        el.className = 'pill';
        el.textContent = c.name + '（' + c.kind + '）';
        deckEl.appendChild(el);
      });
      remainEl.textContent = deck.length;
    }

    function log(line){
      const time = new Date().toLocaleTimeString();
      logEl.innerHTML += `<div><span style="color:#94a3b8">${time}</span>：<b>${line}</b></div>`;
      logEl.scrollTop = logEl.scrollHeight;
    }

    function drawCard(){
      if(deck.length===0){ log('山札がありません'); return; }
      const top = deck.pop();
      renderDeck();
      log('「' + top.name + '」を引いた！ ' + top.kind);
    }

    function resetGame(){
      deck = shuffle(cards);
      renderDeck();
      logEl.innerHTML = '';
      log('ゲームを開始しました');
    }

    // 初期化
    resetGame();
  </script>
</body>
</html>